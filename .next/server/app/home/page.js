(()=>{var e={};e.id=951,e.ids=[951],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3366:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=s(482),r=s(9108),l=s(2563),i=s.n(l),n=s(8300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["home",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4406)),"/Users/majesty/UE HEART/app/home/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2041)),"/Users/majesty/UE HEART/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/majesty/UE HEART/app/home/page.tsx"],h="/home/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/home/page",pathname:"/home",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9889:(e,t,s)=>{Promise.resolve().then(s.bind(s,175)),Promise.resolve().then(s.bind(s,6610))},7818:(e,t,s)=>{Promise.resolve().then(s.bind(s,7601))},4819:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},7601:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5344),r=s(3729),l=s(2829),i=s(1354),n=s(4513),o=s(6506),d=s(8428);function c(){let e=(0,d.useRouter)(),[t,s]=(0,r.useState)([]),[c,h]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[p,x]=(0,r.useState)(0),[f,b]=(0,r.useState)(null),[g,w]=(0,r.useState)(!0),[j,v]=(0,r.useState)(0),[y,N]=(0,r.useState)([]);(0,r.useEffect)(()=>{_(),k()},[]),(0,r.useEffect)(()=>{if(!f)return;let e=f.id,t=l.O.channel("profiles-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"profiles"},t=>{let a=t.new;"approved"!==a.status||a.id===e||y.includes(a.id)||(console.log("New approved profile detected:",a),s(e=>[...e,a]),c||(h(a),x(0)))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},t=>{let a=t.new;"approved"!==a.status||a.id===e||y.includes(a.id)||(console.log("Profile approved in real-time:",a),s(e=>e.some(e=>e.id===a.id)?e:[...e,a]),c||(h(a),x(0)))}).subscribe(),a=l.O.channel("matches-updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"matches"},t=>{let s=t.new;(s.user1_id===e||s.user2_id===e)&&k()}).subscribe();return()=>{l.O.removeChannel(t),l.O.removeChannel(a)}},[f,c,y]);let _=async()=>{let{data:{user:t}}=await l.O.auth.getUser();if(!t){e.push("/");return}let{data:s}=await l.O.from("profiles").select("*").eq("id",t.id).single();if(!s){e.push("/profile-setup");return}if("pending"===s.status){e.push("/profile-setup/pending");return}if("rejected"===s.status){e.push("/profile-setup?rejected=true");return}if("approved"!==s.status){e.push("/");return}b(s),await E(t.id,s),w(!1)},k=async()=>{let{data:{user:e}}=await l.O.auth.getUser();if(!e)return;let{data:t}=await l.O.from("matches").select("*").or(`user1_id.eq.${e.id},user2_id.eq.${e.id}`);v(t?.length||0)},E=async(e,t)=>{let{data:a}=await l.O.from("swipes").select("swiped_id").eq("swiper_id",e),r=a?.map(e=>e.swiped_id)||[];r.push(e),N(r),console.log("Fetching candidates for:",e),console.log("My profile:",t);let{count:i}=await l.O.from("profiles").select("*",{count:"exact",head:!0}).eq("status","approved");console.log("Total approved profiles in DB:",i);let n=`(${r.map(e=>`"${e}"`).join(",")})`,o=l.O.from("profiles").select("*").eq("status","approved").filter("id","not.in",n).limit(10),{data:d,error:c}=await o;c&&console.error("Error fetching candidates:",c),console.log("Candidates found:",d?.length,d),d&&d.length>0?(s(d),h(d[0]),x(0)):(console.log("No candidates found matching criteria."),s([]),h(null))},P=async e=>{if(!c)return;let{data:{user:a}}=await l.O.auth.getUser();if(!a)return;N(e=>[...e,c.id]);let r=t.slice(1);s(r),h(r.length>0?r[0]:null),x(0);let i=l.O.from("swipes").insert({swiper_id:a.id,swiped_id:c.id,direction:e});if("right"===e){let e=l.O.from("swipes").select("*").eq("swiper_id",c.id).eq("swiped_id",a.id).eq("direction","right").single(),[,{data:t}]=await Promise.all([i,e]);t&&(await l.O.from("matches").insert({user1_id:a.id,user2_id:c.id}),m(c))}else await i};return u?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-ue-red/20 via-pink-500/20 to-purple-500/20 backdrop-blur-md flex flex-col items-center justify-center p-8 text-white overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((e,t)=>a.jsx(i.Z,{className:"absolute text-ue-red fill-ue-red opacity-30 animate-float",style:{left:`${100*Math.random()}%`,top:`${100*Math.random()}%`,width:`${30*Math.random()+20}px`,height:`${30*Math.random()+20}px`,animationDelay:`${3*Math.random()}s`,animationDuration:`${3*Math.random()+4}s`}},t))}),(0,a.jsxs)("div",{className:"relative z-10 max-w-md w-full",children:[a.jsx("h1",{className:"text-5xl font-black text-ue-red mb-8 text-center drop-shadow-lg animate-pulse",children:"IT'S A MATCH!"}),(0,a.jsxs)("div",{className:"flex gap-6 items-center justify-center mb-8",children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-white shadow-2xl bg-gray-300",children:f?.photo_urls?.[0]?a.jsx("img",{src:f.photo_urls[0],alt:"You",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-400 to-gray-500 text-white text-3xl font-bold",children:f?.nickname?.[0]||"Y"})})}),a.jsx(i.Z,{className:"text-ue-red fill-ue-red w-12 h-12 animate-bounce"}),a.jsx("div",{className:"relative",children:a.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-white shadow-2xl bg-gray-300",children:u.photo_urls?.[0]?a.jsx("img",{src:u.photo_urls[0],alt:u.nickname||"Match",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-400 to-gray-500 text-white text-3xl font-bold",children:u.nickname?.[0]||"M"})})})]}),(0,a.jsxs)("p",{className:"text-center text-xl mb-10 text-white drop-shadow-md font-medium",children:["You and ",a.jsx("span",{className:"font-bold text-ue-red",children:u.nickname})," liked each other!"]}),(0,a.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[a.jsx(o.default,{href:"/chat",className:"w-full bg-ue-red hover:bg-red-700 py-4 rounded-full text-center font-bold text-lg shadow-xl transition-all hover:scale-105",children:"Send a Message"}),a.jsx("button",{onClick:()=>m(null),className:"w-full bg-white/20 backdrop-blur-sm border-2 border-white hover:bg-white/30 py-4 rounded-full font-bold text-lg transition-all hover:scale-105",children:"Keep Swiping"})]})]})]}):g?a.jsx("div",{className:"h-[100dvh] flex items-center justify-center bg-gradient-to-b from-gray-50 to-gray-100",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-ue-red border-t-transparent mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Loading profiles..."})]})}):(0,a.jsxs)("div",{className:"h-[100dvh] flex flex-col bg-gradient-to-br from-pink-100 via-rose-50 to-red-50 overflow-hidden",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between px-6 py-4 bg-gradient-to-r from-pink-500 to-red-500 shadow-lg z-40",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(i.Z,{className:"w-7 h-7 text-white fill-white"}),a.jsx("h1",{className:"text-xl font-black text-white drop-shadow-md",children:"yUE Match!"})]}),a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(o.default,{href:"/chat",className:"relative p-2 hover:bg-white/20 rounded-full transition-colors group",children:[a.jsx(i.Z,{className:"w-6 h-6 text-white fill-white group-hover:scale-110 transition-transform"}),j>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-ue-red to-pink-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-lg animate-pulse",children:j>9?"9+":j})]})})]}),a.jsx("main",{className:"flex-1 relative overflow-hidden",children:c?(0,a.jsxs)("div",{className:"relative h-full w-full max-w-lg mx-auto",children:[(0,a.jsxs)("div",{className:"absolute inset-4 bg-white rounded-3xl shadow-2xl overflow-hidden",children:[c.photo_urls&&c.photo_urls.length>1&&a.jsx("div",{className:"absolute top-3 left-3 right-3 flex gap-2 z-20",children:c.photo_urls.map((e,t)=>a.jsx("div",{className:`h-1 flex-1 rounded-full transition-all ${t===p?"bg-white shadow-lg":"bg-white/40"}`},t))}),(0,a.jsxs)("div",{className:"absolute inset-0 z-10 flex",children:[a.jsx("button",{className:"w-1/2 h-full focus:outline-none active:bg-black/5",onClick:()=>x(e=>Math.max(0,e-1))}),a.jsx("button",{className:"w-1/2 h-full focus:outline-none active:bg-black/5",onClick:()=>x(e=>Math.min((c.photo_urls?.length||1)-1,e+1))})]}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300",children:[c.photo_urls?.[p]?a.jsx("img",{src:c.photo_urls[p],alt:c.nickname||"Profile",className:"w-full h-full object-cover"}):(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-400",children:[a.jsx(i.Z,{className:"w-20 h-20 mb-2 opacity-20"}),a.jsx("p",{className:"text-sm",children:"No Photo"})]}),a.jsx("div",{className:"absolute inset-x-0 bottom-0 h-2/3 bg-gradient-to-t from-black/90 via-black/40 to-transparent pointer-events-none"})]}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-24 text-white z-20 pointer-events-none",children:[a.jsx("div",{className:"flex justify-between items-start mb-3",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h2",{className:"text-3xl font-bold drop-shadow-lg",children:[c.nickname,a.jsx("span",{className:"text-2xl font-normal ml-2",children:c.year_level})]}),(0,a.jsxs)("p",{className:"text-lg opacity-95 mt-1 flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:c.college}),c.gender&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{className:"opacity-50",children:"â€¢"}),a.jsx("span",{className:"text-base opacity-75",children:c.gender})]})]})]})}),c.description&&a.jsx("p",{className:"text-sm opacity-90 mb-3 line-clamp-2 drop-shadow",children:c.description}),c.hobbies&&c.hobbies.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:c.hobbies.slice(0,4).map((e,t)=>a.jsx("span",{className:"bg-white/25 backdrop-blur-sm text-xs px-3 py-1.5 rounded-full border border-white/20 font-medium",children:e},t))})]}),a.jsx("button",{onClick:e=>{e.stopPropagation();let t=prompt("Why are you reporting this user?");t&&l.O.from("reports").insert({reporter_id:l.O.auth.getUser().id,reported_id:c.id,reason:t}).then(()=>alert("Report submitted"))},className:"absolute top-4 right-4 z-30 pointer-events-auto text-xs text-white/70 bg-black/20 backdrop-blur-sm border border-white/20 px-3 py-1.5 rounded-full hover:bg-black/30 transition-colors",children:"Report"})]}),(0,a.jsxs)("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center items-center gap-6 z-30",children:[a.jsx("button",{onClick:()=>P("left"),className:"w-16 h-16 bg-white rounded-full shadow-xl flex items-center justify-center text-red-500 hover:scale-110 active:scale-95 transition-transform border-2 border-gray-100",children:a.jsx(n.Z,{size:32,strokeWidth:2.5})}),a.jsx("button",{onClick:()=>P("right"),className:"w-20 h-20 bg-ue-red rounded-full shadow-xl flex items-center justify-center text-white hover:scale-110 active:scale-95 transition-transform",children:a.jsx(i.Z,{size:36,fill:"currentColor",strokeWidth:0})})]})]}):a.jsx("div",{className:"h-full flex flex-col items-center justify-center text-center px-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-3xl p-12 shadow-xl max-w-sm",children:[a.jsx(i.Z,{className:"w-20 h-20 mx-auto mb-6 text-ue-red opacity-20"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No More Profiles"}),a.jsx("p",{className:"text-gray-500",children:"Check back later for new matches!"})]})})})]})}},175:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5344),r=s(3729),l=s(8428),i=s(2829),n=s(5961);function o({children:e}){let[t,s]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!0),c=(0,l.useRouter)();(0,r.useEffect)(()=>{let e=null;return(async()=>{try{let{data:{user:t}}=await i.O.auth.getUser();if(!t){d(!1);return}let{data:a}=await i.O.from("profiles").select("status").eq("id",t.id).single();a?.status==="rejected"&&s(!0),e=i.O.channel(`ban-check-${t.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${t.id}`},e=>{let t=e.new;"rejected"===t.status&&s(!0)}).subscribe(),d(!1)}catch(e){console.error("Error checking ban status:",e),d(!1)}})(),()=>{e&&e.unsubscribe()}},[]);let h=async()=>{await i.O.auth.signOut(),c.push("/")};return o?a.jsx(a.Fragment,{children:e}):t?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-red-50 to-white p-6",children:a.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full border-4 border-red-500",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(n.Z,{className:"w-10 h-10 text-red-600"})}),a.jsx("h1",{className:"text-3xl font-black text-red-600 mb-4",children:"Account Banned"}),a.jsx("p",{className:"text-gray-700 text-lg mb-2",children:"Your account has been banned by an administrator."}),a.jsx("p",{className:"text-gray-600 mb-6",children:"You can no longer access yUE Match!. If you believe this was a mistake, please contact support."}),a.jsx("div",{className:"border-t border-gray-200 my-6"}),a.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-4 mb-6",children:(0,a.jsxs)("p",{className:"text-sm text-red-800",children:[a.jsx("strong",{children:"Reason:"})," Violation of community guidelines or user report"]})}),a.jsx("button",{onClick:h,className:"w-full py-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl font-bold text-lg hover:from-red-700 hover:to-red-800 shadow-lg transition-all active:scale-95",children:"Sign Out"}),a.jsx("p",{className:"text-xs text-gray-400 mt-6",children:"Thank you for using yUE Match! responsibly"})]})})}):a.jsx(a.Fragment,{children:e})}},6610:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(5344),r=s(3729),l=s(8428);function i({children:e}){let[t,s]=(0,r.useState)(!0),i=(0,l.usePathname)();(0,r.useEffect)(()=>{let e=()=>{window.innerWidth>768?s(!1):s(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let n=i?.startsWith("/admin");return t||n?a.jsx(a.Fragment,{children:e}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-ue-red text-white p-8 text-center",children:[a.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Mobile Only"}),a.jsx("p",{className:"text-xl",children:"yUE Match! is designed exclusively for mobile devices. Please open this application on your phone or reduce your browser window size."})]})}},2829:(e,t,s)=>{"use strict";s.d(t,{O:()=>i,p:()=>o});var a=s(7635);let r=process.env.NEXT_PUBLIC_SUPABASE_URL,l=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,i=(0,a.eI)(r,l),n=process.env.NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY||l,o=(0,a.eI)(r,n,{auth:{autoRefreshToken:!1,persistSession:!1}})},4513:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4406:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let a=(0,s(6843).createProxy)(String.raw`/Users/majesty/UE HEART/app/home/page.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default},2041:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f,metadata:()=>x});var a=s(5036),r=s(8592),l=s.n(r);s(7272);var i=s(6843);let n=(0,i.createProxy)(String.raw`/Users/majesty/UE HEART/components/MobileGuard.tsx`),{__esModule:o,$$typeof:d}=n,c=n.default,h=(0,i.createProxy)(String.raw`/Users/majesty/UE HEART/components/BanGuard.tsx`),{__esModule:u,$$typeof:m}=h,p=h.default,x={title:"yUE Match!",description:"Find your match at University of the East",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:"yUE Match!"},icons:{icon:[{url:"/icon-192.png",sizes:"192x192",type:"image/png"},{url:"/icon-512.png",sizes:"512x512",type:"image/png"}],apple:[{url:"/apple-icon.png",sizes:"180x180",type:"image/png"}]}};function f({children:e}){return(0,a.jsxs)("html",{lang:"en",children:[(0,a.jsxs)("head",{children:[a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),a.jsx("meta",{name:"mobile-web-app-capable",content:"yes"}),a.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),a.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),a.jsx("meta",{name:"apple-mobile-web-app-title",content:"yUE Match!"}),a.jsx("link",{rel:"apple-touch-icon",href:"/apple-icon.png"})]}),a.jsx("body",{className:l().className,children:a.jsx(c,{children:a.jsx(p,{children:e})})})]})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[225,454,134],()=>s(3366));module.exports=a})();