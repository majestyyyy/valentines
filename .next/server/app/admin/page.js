(()=>{var e={};e.id=3,e.ids=[3],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8461:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>o});var r=t(482),a=t(9108),l=t(2563),n=t.n(l),i=t(8300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9481)),"/Users/majesty/UE HEART/app/admin/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,6294)),"/Users/majesty/UE HEART/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,2041)),"/Users/majesty/UE HEART/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/majesty/UE HEART/app/admin/page.tsx"],x="/admin/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},1801:(e,s,t)=>{Promise.resolve().then(t.bind(t,7558))},9889:(e,s,t)=>{Promise.resolve().then(t.bind(t,175)),Promise.resolve().then(t.bind(t,6610))},4819:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},5303:()=>{},7558:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(5344),a=t(3729),l=t(2829),n=t(8428),i=t(9224);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,i.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),o=(0,i.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function c(){let e=(0,n.useRouter)(),[s,t]=(0,a.useState)("pending"),[i,c]=(0,a.useState)([]),[x,m]=(0,a.useState)([]),[h,p]=(0,a.useState)(!1),[u,g]=(0,a.useState)(!0),[b,f]=(0,a.useState)(""),[j,v]=(0,a.useState)(null),[y,N]=(0,a.useState)(null),[w,k]=(0,a.useState)([]),[_,E]=(0,a.useState)(!1),[D,C]=(0,a.useState)({totalUsers:0,pendingApprovals:0,totalMatches:0,openReports:0});(0,a.useEffect)(()=>{A(),q(),R(),P();let e=l.O.channel("admin-profiles").on("postgres_changes",{event:"INSERT",schema:"public",table:"profiles",filter:"status=eq.pending"},e=>{c(s=>[...s,e.new])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},e=>{let s=e.new;"pending"!==s.status&&c(e=>e.filter(e=>e.id!==s.id))}).subscribe(),s=l.O.channel("admin-reports").on("postgres_changes",{event:"INSERT",schema:"public",table:"reports"},async e=>{let s=e.new,{data:t}=await l.O.from("profiles").select("*").eq("id",s.reporter_id).single(),{data:r}=await l.O.from("profiles").select("*").eq("id",s.reported_id).single();t&&r&&m(e=>[...e,{...s,reporter:t,reported:r}])}).on("postgres_changes",{event:"DELETE",schema:"public",table:"reports"},e=>{m(s=>s.filter(s=>s.id!==e.old.id))}).subscribe();return()=>{l.O.removeChannel(e),l.O.removeChannel(s)}},[]);let P=async()=>{let{data:e}=await l.p.from("profiles").select("status",{count:"exact"}),{data:s,count:t}=await l.p.from("matches").select("*",{count:"exact",head:!0}),r=e?.filter(e=>"pending"===e.status).length||0;C({totalUsers:e?.filter(e=>"approved"===e.status).length||0,pendingApprovals:r,totalMatches:t||0,openReports:x.length})},A=async()=>{let{data:{user:s}}=await l.O.auth.getUser();if(!s){e.push("/admin/login");return}let{data:t}=await l.O.from("profiles").select("role, email").eq("id",s.id).single();f(t?.email||"Admin User"),t?.role==="admin"?p(!0):e.push("/admin/login"),g(!1)},U=async()=>{confirm("Are you sure you want to log out?")&&(await l.O.auth.signOut(),e.push("/admin/login"))},q=async()=>{let{data:e}=await l.p.from("profiles").select("*").eq("status","pending");e&&c(e),g(!1)},R=async()=>{let{data:e}=await l.p.from("reports").select("*");e&&e.length>0&&m(await Promise.all(e.map(async e=>{let{data:s}=await l.p.from("profiles").select("*").eq("id",e.reporter_id).single(),{data:t}=await l.p.from("profiles").select("*").eq("id",e.reported_id).single();return{...e,reporter:s,reported:t}})))},S=async(e,s)=>{c(s=>s.filter(s=>s.id!==e)),C(e=>({...e,pendingApprovals:e.pendingApprovals-1,totalUsers:"approved"===s?e.totalUsers+1:e.totalUsers}));try{await l.p.from("profiles").update({status:s}).eq("id",e)}catch(e){console.error("Error updating profile:",e),q(),P()}},O=async(e,s)=>{if(confirm("Ban this user?")){m(e=>e.filter(e=>e.id!==s)),C(e=>({...e,openReports:e.openReports-1}));try{let{data:t}=await l.p.from("matches").select("user1_id, user2_id").or(`user1_id.eq.${e},user2_id.eq.${e}`);t&&t.length>0&&await l.p.from("matches").delete().or(`user1_id.eq.${e},user2_id.eq.${e}`),await l.p.from("profiles").update({status:"rejected"}).eq("id",e),await l.p.from("reports").delete().eq("id",s)}catch(e){console.error("Error banning user:",e),R(),P()}}},T=async(e,s)=>{E(!0);try{let{data:t}=await l.p.from("matches").select("id").or(`and(user1_id.eq.${e},user2_id.eq.${s}),and(user1_id.eq.${s},user2_id.eq.${e})`).single();if(!t){console.log("No match found between users"),k([]),E(!1);return}let{data:r,error:a}=await l.p.from("messages").select("*").eq("match_id",t.id).order("created_at",{ascending:!0});a&&console.error("Error loading messages:",a),k(r||[])}catch(e){console.error("Error loading messages:",e),k([])}finally{E(!1)}};return u?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-50 to-white",children:r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-ue-red border-t-transparent"})}):h?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-8",children:[r.jsx("div",{className:"bg-gradient-to-r from-ue-red to-red-700 shadow-lg p-4 md:p-6 sticky top-0 z-10 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl md:text-3xl font-black text-white mb-1 flex items-center gap-3",children:[r.jsx("span",{className:"text-3xl md:text-4xl",children:"\uD83D\uDEE1️"}),"Admin Dashboard"]}),r.jsx("p",{className:"text-white/80 text-sm",children:"Manage users and reports"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 md:gap-4 w-full md:w-auto",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl px-3 md:px-4 py-2 md:py-3 border border-white/20 flex-1 md:flex-initial",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs md:text-sm text-white",children:[r.jsx(d,{className:"w-3 h-3 md:w-4 md:h-4"}),r.jsx("span",{className:"font-medium truncate",children:b})]}),r.jsx("div",{className:"text-xs text-green-300 font-bold mt-0.5",children:"● Admin Access"})]}),(0,r.jsxs)("button",{onClick:U,className:"flex items-center gap-2 px-3 md:px-5 py-2 md:py-3 bg-white/20 hover:bg-white/30 backdrop-blur-md text-white rounded-2xl font-bold transition-all active:scale-95 shadow-lg border border-white/30 text-sm md:text-base",children:[r.jsx(o,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden md:inline",children:"Logout"})]})]})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6 py-6 md:py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-3xl p-6 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("div",{className:"text-4xl",children:"\uD83D\uDC65"}),r.jsx("div",{className:"text-4xl font-black",children:D.totalUsers})]}),r.jsx("div",{className:"text-sm font-semibold opacity-90",children:"Total Users"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-3xl p-6 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("div",{className:"text-4xl",children:"⏳"}),r.jsx("div",{className:"text-4xl font-black",children:D.pendingApprovals})]}),r.jsx("div",{className:"text-sm font-semibold opacity-90",children:"Pending Approvals"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-3xl p-6 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("div",{className:"text-4xl",children:"\uD83D\uDC95"}),r.jsx("div",{className:"text-4xl font-black",children:D.totalMatches})]}),r.jsx("div",{className:"text-sm font-semibold opacity-90",children:"Total Matches"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-3xl p-6 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("div",{className:"text-4xl",children:"⚠️"}),r.jsx("div",{className:"text-4xl font-black",children:D.openReports})]}),r.jsx("div",{className:"text-sm font-semibold opacity-90",children:"Open Reports"})]})]})}),(0,r.jsxs)("div",{className:"max-w-5xl mx-auto p-6",children:[(0,r.jsxs)("div",{className:"flex gap-3 mb-8 bg-white rounded-3xl p-2 shadow-lg border-2 border-gray-100",children:[r.jsx("button",{onClick:()=>t("pending"),className:`flex-1 py-4 px-6 font-bold rounded-2xl transition-all duration-300 ${"pending"===s?"bg-gradient-to-r from-ue-red to-red-600 text-white shadow-xl scale-105":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"}`,children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:"\uD83D\uDCCB"}),r.jsx("span",{children:"Pending Approvals"}),D.pendingApprovals>0&&r.jsx("span",{className:"ml-2 bg-white/30 text-white text-xs font-bold px-2 py-1 rounded-full",children:D.pendingApprovals})]})}),r.jsx("button",{onClick:()=>t("reports"),className:`flex-1 py-4 px-6 font-bold rounded-2xl transition-all duration-300 ${"reports"===s?"bg-gradient-to-r from-ue-red to-red-600 text-white shadow-xl scale-105":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"}`,children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:"⚠️"}),r.jsx("span",{children:"Reports"}),D.openReports>0&&r.jsx("span",{className:"ml-2 bg-white/30 text-white text-xs font-bold px-2 py-1 rounded-full",children:D.openReports})]})})]}),"pending"===s&&(0,r.jsxs)("div",{className:"space-y-4",children:[0===i.length&&(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-12 text-center shadow-sm",children:[r.jsx("div",{className:"text-5xl mb-4",children:"✅"}),r.jsx("p",{className:"text-gray-500 font-medium",children:"No pending profiles"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"All caught up!"})]}),i.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-3xl p-6 shadow-lg border-2 border-gray-100 hover:shadow-2xl hover:border-ue-red/30 transition-all duration-300 transform hover:-translate-y-1",children:[(0,r.jsxs)("div",{className:"flex gap-4 mb-4",children:[r.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-200 to-gray-300 rounded-2xl overflow-hidden flex-shrink-0 shadow-md cursor-pointer hover:ring-4 hover:ring-ue-red/30 transition-all",onClick:()=>v(e),children:e.photo_urls?.[0]?r.jsx("img",{src:e.photo_urls[0],className:"w-full h-full object-cover",alt:e.nickname||"User"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-3xl font-bold text-gray-400",children:e.nickname?.[0]||"U"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-xl text-gray-800",children:e.nickname}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.college," - Year ",e.year_level]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e.email}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[r.jsx("span",{className:"font-semibold",children:"Gender:"})," ",e.gender," •",r.jsx("span",{className:"font-semibold ml-2",children:"Prefers:"})," ",e.preferred_gender]})]})]}),e.hobbies&&e.hobbies.length>0&&(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Hobbies"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.hobbies.map((e,s)=>r.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-3 py-1 rounded-full font-medium",children:e},s))})]}),e.description&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Bio"}),r.jsx("p",{className:"text-sm bg-gray-50 p-3 rounded-xl border border-gray-100",children:e.description})]}),(0,r.jsxs)("button",{onClick:()=>v(e),className:"w-full mb-4 py-3 border-2 border-ue-red text-ue-red rounded-2xl font-bold hover:bg-ue-red hover:text-white transition-all duration-300 active:scale-95 shadow-md hover:shadow-lg",children:[r.jsx("span",{className:"text-lg",children:"\uD83D\uDC41️"})," View Full Profile"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("button",{onClick:()=>S(e.id,"rejected"),className:"py-4 border-2 border-red-500 text-red-600 rounded-2xl font-bold hover:bg-red-500 hover:text-white transition-all duration-300 active:scale-95 shadow-md hover:shadow-xl",children:[r.jsx("span",{className:"text-lg",children:"❌"})," Reject"]}),(0,r.jsxs)("button",{onClick:()=>S(e.id,"approved"),className:"py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-2xl font-bold hover:from-green-600 hover:to-green-700 shadow-lg hover:shadow-xl transition-all duration-300 active:scale-95",children:[r.jsx("span",{className:"text-lg",children:"✅"})," Approve"]})]})]},e.id))]}),"reports"===s&&(0,r.jsxs)("div",{className:"space-y-6",children:[0===x.length&&(0,r.jsxs)("div",{className:"bg-white rounded-3xl p-16 text-center shadow-lg",children:[r.jsx("div",{className:"text-7xl mb-4",children:"\uD83D\uDE0A"}),r.jsx("p",{className:"text-gray-700 font-bold text-xl mb-2",children:"No reports filed"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Community is doing great!"})]}),x.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-3xl p-6 shadow-lg border-2 border-red-200 hover:shadow-2xl hover:border-red-400 transition-all duration-300 transform hover:-translate-y-1",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg",children:r.jsx("span",{className:"text-2xl",children:"⚠️"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"font-black text-red-600 text-xl mb-1",children:e.reason}),(0,r.jsxs)("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[r.jsx("span",{children:"\uD83D\uDCC5"})," ",new Date(e.created_at).toLocaleString()]})]})]}),e.details&&(0,r.jsxs)("div",{className:"mb-5",children:[(0,r.jsxs)("p",{className:"text-xs font-bold text-red-700 uppercase mb-2 flex items-center gap-1",children:[r.jsx("span",{children:"\uD83D\uDCDD"})," Additional Details"]}),r.jsx("p",{className:"text-sm bg-gradient-to-br from-red-50 to-orange-50 p-4 rounded-2xl border-2 border-red-200 leading-relaxed",children:e.details})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-5 space-y-3 mb-5 border border-gray-200 shadow-inner",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"font-semibold text-gray-600",children:"Reporter:"}),r.jsx("span",{className:"text-gray-800",children:e.reporter?.nickname})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"font-semibold text-gray-600",children:"Reported User:"}),r.jsx("span",{className:"text-gray-800 font-bold",children:e.reported?.nickname})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("button",{onClick:()=>v(e.reported),className:"py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl font-bold hover:from-blue-600 hover:to-blue-700 shadow-lg hover:shadow-xl transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",children:[r.jsx("span",{className:"text-lg",children:"\uD83D\uDC64"})," View Profile"]}),(0,r.jsxs)("button",{onClick:()=>{N(e),T(e.reporter_id,e.reported_id)},className:"py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-2xl font-bold hover:from-purple-600 hover:to-purple-700 shadow-lg hover:shadow-xl transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",children:[r.jsx("span",{className:"text-lg",children:"\uD83D\uDCAC"})," View Chat"]})]}),(0,r.jsxs)("button",{onClick:()=>O(e.reported_id,e.id),className:"w-full py-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl font-bold hover:from-red-700 hover:to-red-800 shadow-xl hover:shadow-2xl transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",children:[r.jsx("span",{className:"text-xl",children:"\uD83D\uDEAB"})," Ban User"]})]},e.id))]})]}),j&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-50 flex items-center justify-center p-6 animate-fade-in",onClick:()=>v(null),children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl transform animate-slide-up",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-ue-red to-red-700 p-6 text-white rounded-t-3xl shadow-lg z-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-3xl",children:"\uD83D\uDC64"}),r.jsx("h2",{className:"text-2xl font-black",children:"Profile Review"})]}),r.jsx("button",{onClick:()=>v(null),className:"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-2xl flex items-center justify-center transition-all active:scale-95 shadow-lg",children:r.jsx("span",{className:"text-3xl font-bold",children:"\xd7"})})]}),r.jsx("p",{className:"text-white/80 text-sm",children:"Review user information and photos"})]}),(0,r.jsxs)("div",{className:"p-6",children:[j.photo_urls&&j.photo_urls.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("p",{className:"text-xs font-bold text-gray-700 uppercase mb-3 flex items-center gap-2",children:[r.jsx("span",{children:"\uD83D\uDCF8"})," Profile Photos"]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:j.photo_urls.map((e,s)=>r.jsx("div",{className:"aspect-square bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow",children:r.jsx("img",{src:e,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300",alt:`Photo ${s+1}`})},s))})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-6 mb-6 space-y-4 shadow-inner border border-gray-200",children:[(0,r.jsxs)("h3",{className:"font-black text-lg text-gray-800 mb-3 flex items-center gap-2",children:[r.jsx("span",{children:"ℹ️"})," Basic Information"]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Nickname"}),r.jsx("span",{className:"text-sm text-gray-800 font-semibold",children:j.nickname})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Email"}),r.jsx("span",{className:"text-sm text-gray-800",children:j.email})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm font-bold text-gray-600",children:"College"}),r.jsx("span",{className:"text-sm text-gray-800 font-semibold",children:j.college})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Year Level"}),r.jsx("span",{className:"text-sm text-gray-800",children:j.year_level})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Gender"}),r.jsx("span",{className:"text-sm text-gray-800",children:j.gender})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Looking For"}),r.jsx("span",{className:"text-sm text-gray-800",children:j.preferred_gender})]})]}),j.hobbies&&j.hobbies.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-3",children:"Hobbies"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:j.hobbies.map((e,s)=>r.jsx("span",{className:"bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-sm font-medium",children:e},s))})]}),j.description&&(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-3",children:"Bio"}),r.jsx("p",{className:"text-sm bg-gray-50 p-4 rounded-xl border border-gray-100 leading-relaxed",children:j.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{onClick:()=>{S(j.id,"rejected"),v(null)},className:"py-4 border-2 border-red-500 text-red-500 rounded-xl font-bold hover:bg-red-50 transition-all active:scale-95",children:"❌ Reject Profile"}),r.jsx("button",{onClick:()=>{S(j.id,"approved"),v(null)},className:"py-4 bg-green-500 text-white rounded-xl font-bold hover:bg-green-600 shadow-lg transition-all active:scale-95",children:"✅ Approve Profile"})]})]})]})}),y&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-50 flex items-center justify-center p-6 animate-fade-in",onClick:()=>{N(null),k([])},children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl transform animate-slide-up",onClick:e=>e.stopPropagation(),children:[r.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-purple-700 p-6 text-white rounded-t-3xl shadow-lg z-10",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-3xl",children:"\uD83D\uDCAC"}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-black",children:"Chat History"}),(0,r.jsxs)("p",{className:"text-sm text-white/80 mt-1",children:[y.reporter?.nickname," ↔️ ",y.reported?.nickname]})]})]}),r.jsx("button",{onClick:()=>{N(null),k([])},className:"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-2xl flex items-center justify-center transition-all active:scale-95 shadow-lg",children:r.jsx("span",{className:"text-3xl font-bold",children:"\xd7"})})]})}),r.jsx("div",{className:"p-6 bg-gradient-to-br from-red-50 to-orange-50 border-b-2 border-red-200",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg",children:r.jsx("span",{className:"text-2xl",children:"⚠️"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"font-black text-red-600 text-xl mb-2",children:y.reason}),y.details&&r.jsx("p",{className:"text-sm text-red-700 bg-white/50 p-3 rounded-xl border border-red-200",children:y.details})]})]})}),(0,r.jsxs)("div",{className:"p-6",children:[_?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-purple-500 border-t-transparent mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Loading messages..."})]}):0===w.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-5xl mb-4",children:"\uD83D\uDCAC"}),r.jsx("p",{className:"text-gray-500 font-medium",children:"No messages found"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"These users haven't chatted yet"})]}):r.jsx("div",{className:"space-y-3",children:w.map(e=>{let s=e.sender_id===y.reporter_id,t=e.sender_id===y.reported_id;return r.jsx("div",{className:`flex ${s?"justify-start":"justify-end"}`,children:(0,r.jsxs)("div",{className:`max-w-[70%] rounded-2xl px-4 py-3 ${s?"bg-gray-100 text-gray-800":t?"bg-red-100 text-red-900 border-2 border-red-300":"bg-blue-500 text-white"}`,children:[r.jsx("div",{className:"flex items-center gap-2 mb-1",children:(0,r.jsxs)("span",{className:"text-xs font-bold opacity-70",children:[s?y.reporter?.nickname:y.reported?.nickname,t&&" (Reported)"]})}),r.jsx("p",{className:"text-sm break-words",children:e.content}),r.jsx("p",{className:"text-xs opacity-60 mt-1",children:new Date(e.created_at).toLocaleString()})]})},e.id)})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-6 mt-6 border-t-2 border-gray-200",children:[r.jsx("button",{onClick:()=>{N(null),k([])},className:"py-4 border-2 border-gray-300 text-gray-700 rounded-2xl font-bold hover:bg-gray-50 hover:border-gray-400 transition-all duration-300 active:scale-95 shadow-md",children:"Close"}),(0,r.jsxs)("button",{onClick:()=>{O(y.reported_id,y.id),N(null),k([])},className:"py-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl font-bold hover:from-red-700 hover:to-red-800 shadow-xl hover:shadow-2xl transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",children:[r.jsx("span",{className:"text-xl",children:"\uD83D\uDEAB"})," Ban User"]})]})]})]})})]}):null}},175:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(5344),a=t(3729),l=t(8428),n=t(2829),i=t(5961);function d({children:e}){let[s,t]=(0,a.useState)(!1),[d,o]=(0,a.useState)(!0),c=(0,l.useRouter)();(0,a.useEffect)(()=>{let e=null;return(async()=>{try{let{data:{user:s}}=await n.O.auth.getUser();if(!s){o(!1);return}let{data:r}=await n.O.from("profiles").select("status").eq("id",s.id).single();r?.status==="rejected"&&t(!0),e=n.O.channel(`ban-check-${s.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${s.id}`},e=>{let s=e.new;"rejected"===s.status&&t(!0)}).subscribe(),o(!1)}catch(e){console.error("Error checking ban status:",e),o(!1)}})(),()=>{e&&e.unsubscribe()}},[]);let x=async()=>{await n.O.auth.signOut(),c.push("/")};return d?r.jsx(r.Fragment,{children:e}):s?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-red-50 to-white p-6",children:r.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full border-4 border-red-500",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(i.Z,{className:"w-10 h-10 text-red-600"})}),r.jsx("h1",{className:"text-3xl font-black text-red-600 mb-4",children:"Account Banned"}),r.jsx("p",{className:"text-gray-700 text-lg mb-2",children:"Your account has been banned by an administrator."}),r.jsx("p",{className:"text-gray-600 mb-6",children:"You can no longer access yUE Match!. If you believe this was a mistake, please contact support."}),r.jsx("div",{className:"border-t border-gray-200 my-6"}),r.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-4 mb-6",children:(0,r.jsxs)("p",{className:"text-sm text-red-800",children:[r.jsx("strong",{children:"Reason:"})," Violation of community guidelines or user report"]})}),r.jsx("button",{onClick:x,className:"w-full py-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl font-bold text-lg hover:from-red-700 hover:to-red-800 shadow-lg transition-all active:scale-95",children:"Sign Out"}),r.jsx("p",{className:"text-xs text-gray-400 mt-6",children:"Thank you for using yUE Match! responsibly"})]})})}):r.jsx(r.Fragment,{children:e})}},6610:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(5344),a=t(3729),l=t(8428);function n({children:e}){let[s,t]=(0,a.useState)(!0),n=(0,l.usePathname)();(0,a.useEffect)(()=>{let e=()=>{window.innerWidth>768?t(!1):t(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let i=n?.startsWith("/admin");return s||i?r.jsx(r.Fragment,{children:e}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-ue-red text-white p-8 text-center",children:[r.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Mobile Only"}),r.jsx("p",{className:"text-xl",children:"yUE Match! is designed exclusively for mobile devices. Please open this application on your phone or reduce your browser window size."})]})}},2829:(e,s,t)=>{"use strict";t.d(s,{O:()=>n,p:()=>d});var r=t(7635);let a=process.env.NEXT_PUBLIC_SUPABASE_URL,l=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,n=(0,r.eI)(a,l),i=process.env.NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY||l,d=(0,r.eI)(a,i,{auth:{autoRefreshToken:!1,persistSession:!1}})},6294:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(5036);function a({children:e}){return r.jsx(r.Fragment,{children:e})}},9481:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>n});let r=(0,t(6843).createProxy)(String.raw`/Users/majesty/UE HEART/app/admin/page.tsx`),{__esModule:a,$$typeof:l}=r,n=r.default},2041:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g,metadata:()=>u});var r=t(5036),a=t(8592),l=t.n(a);t(7272);var n=t(6843);let i=(0,n.createProxy)(String.raw`/Users/majesty/UE HEART/components/MobileGuard.tsx`),{__esModule:d,$$typeof:o}=i,c=i.default,x=(0,n.createProxy)(String.raw`/Users/majesty/UE HEART/components/BanGuard.tsx`),{__esModule:m,$$typeof:h}=x,p=x.default,u={title:"yUE Match!",description:"Find your match at University of the East",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:"yUE Match!"},icons:{icon:[{url:"/icon-192.png",sizes:"192x192",type:"image/png"},{url:"/icon-512.png",sizes:"512x512",type:"image/png"}],apple:[{url:"/apple-icon.png",sizes:"180x180",type:"image/png"}]}};function g({children:e}){return(0,r.jsxs)("html",{lang:"en",children:[(0,r.jsxs)("head",{children:[r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),r.jsx("meta",{name:"mobile-web-app-capable",content:"yes"}),r.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),r.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),r.jsx("meta",{name:"apple-mobile-web-app-title",content:"yUE Match!"}),r.jsx("link",{rel:"apple-touch-icon",href:"/apple-icon.png"})]}),r.jsx("body",{className:l().className,children:r.jsx(c,{children:r.jsx(p,{children:e})})})]})}},7272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[225,454],()=>t(8461));module.exports=r})();