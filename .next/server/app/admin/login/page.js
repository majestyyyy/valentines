(()=>{var e={};e.id=920,e.ids=[920],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8103:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=r(482),n=r(9108),a=r(2563),i=r.n(a),o=r(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["admin",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4162)),"/Users/majesty/UE HEART/app/admin/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,6294)),"/Users/majesty/UE HEART/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2041)),"/Users/majesty/UE HEART/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/majesty/UE HEART/app/admin/login/page.tsx"],u="/admin/login/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/login/page",pathname:"/admin/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},143:(e,t,r)=>{Promise.resolve().then(r.bind(r,8529))},9889:(e,t,r)=>{Promise.resolve().then(r.bind(r,175)),Promise.resolve().then(r.bind(r,6610))},4819:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},5303:()=>{},8529:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5344),n=r(3729),a=r(2829),i=r(8428);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,r(9224).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);var l=r(1206),d=r(2965);function c(){let[e,t]=(0,n.useState)("login"),[r,c]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),[x,p]=(0,n.useState)(!1),[h,g]=(0,n.useState)(""),f=(0,i.useRouter)(),b=async e=>{e.preventDefault(),p(!0),g("");try{let{error:e}=await a.O.auth.signInWithOtp({email:r,options:{shouldCreateUser:!0,data:{role:"admin"}}});if(e)throw e;g("OTP sent to your email! Please check your inbox."),t("verify")}catch(e){g(e.message||"Failed to send OTP")}finally{p(!1)}},y=async e=>{e.preventDefault(),p(!0),g("");try{let{error:e}=await a.O.auth.signInWithOtp({email:r,options:{shouldCreateUser:!1}});if(e)throw e;g("OTP sent to your email! Please check your inbox."),t("verify")}catch(e){g(e.message||"Failed to send OTP")}finally{p(!1)}},j=async e=>{e.preventDefault(),p(!0),g("");try{let{data:e,error:t}=await a.O.auth.verifyOtp({email:r,token:u,type:"email"});if(t)throw console.error("OTP Verification Error:",t),t;if(!e.session)throw Error("No session created after verification");if(e.user){console.log("User verified:",e.user.id);let{data:t,error:s}=await a.O.from("profiles").select("role").eq("id",e.user.id).single();if(s){console.log("Profile not found, creating admin profile");let t={id:e.user.id,email:r,role:"admin",status:"approved"},{error:s}=await a.p.from("profiles").insert(t);if(s)throw console.error("Error creating profile:",s),s;console.log("Admin profile created, redirecting..."),f.push("/admin")}else if(t?.role==="admin")console.log("Existing admin found, redirecting..."),f.push("/admin");else{console.log("Updating user to admin role");let{error:t}=await a.p.from("profiles").update({role:"admin",status:"approved"}).eq("id",e.user.id);if(t)throw console.error("Error updating role:",t),t;console.log("User promoted to admin, redirecting..."),f.push("/admin")}}else throw Error("No user data returned after verification")}catch(e){console.error("Verification failed:",e),g(e.message||"Invalid or expired OTP code")}finally{p(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center p-6",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-ue-red to-red-700 rounded-full mb-4 shadow-2xl",children:s.jsx(o,{className:"w-12 h-12 text-white"})}),s.jsx("h1",{className:"text-4xl font-black text-white mb-2",children:"Admin Portal"}),s.jsx("p",{className:"text-gray-400",children:"yUE Match! Administration"})]}),s.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-8",children:"verify"===e?(0,s.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-3",children:s.jsx(l.Z,{className:"w-8 h-8 text-green-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Check Your Email"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["We sent an 8-digit code to ",s.jsx("strong",{children:r})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"otp",className:"block text-sm font-bold text-gray-700 mb-2",children:"Enter OTP Code"}),s.jsx("input",{type:"text",id:"otp",className:"w-full rounded-xl border-2 border-gray-200 px-4 py-4 focus:border-ue-red focus:outline-none transition-colors text-center text-2xl font-bold tracking-widest",placeholder:"00000000",value:u,onChange:e=>m(e.target.value.replace(/\D/g,"").slice(0,8)),maxLength:8,required:!0})]}),h&&s.jsx("div",{className:`p-4 rounded-xl text-sm font-medium ${h.includes("sent")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:h}),(0,s.jsxs)("button",{type:"submit",disabled:x||8!==u.length,className:"w-full rounded-full bg-gradient-to-r from-ue-red to-red-700 px-6 py-4 text-base font-bold text-white shadow-xl hover:shadow-2xl focus:outline-none disabled:opacity-50 transition-all active:scale-95 flex items-center justify-center gap-2",children:[s.jsx(d.Z,{className:"w-5 h-5"}),x?"Verifying...":"Verify & Sign In"]}),s.jsx("button",{type:"button",onClick:()=>{t("login"),m(""),g("")},className:"w-full text-sm text-gray-500 hover:text-ue-red transition-colors",children:"← Back to login"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-6 bg-gray-100 rounded-xl p-1",children:[s.jsx("button",{type:"button",onClick:()=>t("login"),className:`flex-1 py-2 px-4 font-bold rounded-lg transition-all ${"login"===e?"bg-white text-ue-red shadow-sm":"text-gray-500"}`,children:"Login"}),s.jsx("button",{type:"button",onClick:()=>t("signup"),className:`flex-1 py-2 px-4 font-bold rounded-lg transition-all ${"signup"===e?"bg-white text-ue-red shadow-sm":"text-gray-500"}`,children:"Sign Up"})]}),(0,s.jsxs)("form",{onSubmit:"signup"===e?b:y,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-bold text-gray-700 mb-2",children:"Admin Email"}),s.jsx("input",{type:"email",id:"email",className:"w-full rounded-xl border-2 border-gray-200 px-4 py-4 focus:border-ue-red focus:outline-none transition-colors text-base",placeholder:"admin@ue.edu.ph",value:r,onChange:e=>c(e.target.value),required:!0})]}),h&&s.jsx("div",{className:`p-4 rounded-xl text-sm font-medium ${h.includes("sent")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:h}),(0,s.jsxs)("button",{type:"submit",disabled:x,className:"w-full rounded-full bg-gradient-to-r from-ue-red to-red-700 px-6 py-4 text-base font-bold text-white shadow-xl hover:shadow-2xl focus:outline-none disabled:opacity-50 transition-all active:scale-95 flex items-center justify-center gap-2",children:[s.jsx(l.Z,{className:"w-5 h-5"}),x?"Sending OTP...":"signup"===e?"Sign Up with OTP":"Login with OTP"]})]})]})}),(0,s.jsxs)("div",{className:"text-center text-sm text-gray-400 mt-6 space-y-2",children:[s.jsx("p",{children:"✉️ OTP will be sent to your email"}),s.jsx("p",{children:"This area is restricted to authorized administrators only."})]})]})})}},175:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(5344),n=r(3729),a=r(8428),i=r(2829),o=r(5961);function l({children:e}){let[t,r]=(0,n.useState)(!1),[l,d]=(0,n.useState)(!0),c=(0,a.useRouter)();(0,n.useEffect)(()=>{let e=null;return(async()=>{try{let{data:{user:t}}=await i.O.auth.getUser();if(!t){d(!1);return}let{data:s}=await i.O.from("profiles").select("status").eq("id",t.id).single();s?.status==="rejected"&&r(!0),e=i.O.channel(`ban-check-${t.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${t.id}`},e=>{let t=e.new;"rejected"===t.status&&r(!0)}).subscribe(),d(!1)}catch(e){console.error("Error checking ban status:",e),d(!1)}})(),()=>{e&&e.unsubscribe()}},[]);let u=async()=>{await i.O.auth.signOut(),c.push("/")};return l?s.jsx(s.Fragment,{children:e}):t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-red-50 to-white p-6",children:s.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full border-4 border-red-500",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(o.Z,{className:"w-10 h-10 text-red-600"})}),s.jsx("h1",{className:"text-3xl font-black text-red-600 mb-4",children:"Account Banned"}),s.jsx("p",{className:"text-gray-700 text-lg mb-2",children:"Your account has been banned by an administrator."}),s.jsx("p",{className:"text-gray-600 mb-6",children:"You can no longer access yUE Match!. If you believe this was a mistake, please contact support."}),s.jsx("div",{className:"border-t border-gray-200 my-6"}),s.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-4 mb-6",children:(0,s.jsxs)("p",{className:"text-sm text-red-800",children:[s.jsx("strong",{children:"Reason:"})," Violation of community guidelines or user report"]})}),s.jsx("button",{onClick:u,className:"w-full py-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl font-bold text-lg hover:from-red-700 hover:to-red-800 shadow-lg transition-all active:scale-95",children:"Sign Out"}),s.jsx("p",{className:"text-xs text-gray-400 mt-6",children:"Thank you for using yUE Match! responsibly"})]})})}):s.jsx(s.Fragment,{children:e})}},6610:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(5344),n=r(3729),a=r(8428);function i({children:e}){let[t,r]=(0,n.useState)(!0),i=(0,a.usePathname)();(0,n.useEffect)(()=>{let e=()=>{window.innerWidth>768?r(!1):r(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let o=i?.startsWith("/admin");return t||o?s.jsx(s.Fragment,{children:e}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-ue-red text-white p-8 text-center",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Mobile Only"}),s.jsx("p",{className:"text-xl",children:"yUE Match! is designed exclusively for mobile devices. Please open this application on your phone or reduce your browser window size."})]})}},2829:(e,t,r)=>{"use strict";r.d(t,{O:()=>i,p:()=>l});var s=r(7635);let n=process.env.NEXT_PUBLIC_SUPABASE_URL,a=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,i=(0,s.eI)(n,a),o=process.env.NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY||a,l=(0,s.eI)(n,o,{auth:{autoRefreshToken:!1,persistSession:!1}})},2965:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(9224).Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]])},1206:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(9224).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},6294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(5036);function n({children:e}){return s.jsx(s.Fragment,{children:e})}},4162:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>n,default:()=>i});let s=(0,r(6843).createProxy)(String.raw`/Users/majesty/UE HEART/app/admin/login/page.tsx`),{__esModule:n,$$typeof:a}=s,i=s.default},2041:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g,metadata:()=>h});var s=r(5036),n=r(8592),a=r.n(n);r(7272);var i=r(6843);let o=(0,i.createProxy)(String.raw`/Users/majesty/UE HEART/components/MobileGuard.tsx`),{__esModule:l,$$typeof:d}=o,c=o.default,u=(0,i.createProxy)(String.raw`/Users/majesty/UE HEART/components/BanGuard.tsx`),{__esModule:m,$$typeof:x}=u,p=u.default,h={title:"yUE Match!",description:"Find your match at University of the East",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:"yUE Match!"},icons:{icon:[{url:"/icon-192.png",sizes:"192x192",type:"image/png"},{url:"/icon-512.png",sizes:"512x512",type:"image/png"}],apple:[{url:"/apple-icon.png",sizes:"180x180",type:"image/png"}]}};function g({children:e}){return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsxs)("head",{children:[s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),s.jsx("meta",{name:"mobile-web-app-capable",content:"yes"}),s.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),s.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),s.jsx("meta",{name:"apple-mobile-web-app-title",content:"yUE Match!"}),s.jsx("link",{rel:"apple-touch-icon",href:"/apple-icon.png"})]}),s.jsx("body",{className:a().className,children:s.jsx(c,{children:s.jsx(p,{children:e})})})]})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[225,454],()=>r(8103));module.exports=s})();