(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{3781:function(e,t,s){Promise.resolve().then(s.bind(s,5040))},5040:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(3827),a=s(4090),n=s(5922),i=s(9108),l=s(5211),d=s(8792);function c(){let[e,t]=(0,a.useState)([]),[s,c]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e;(async()=>{let{data:{user:s}}=await n.O.auth.getUser();if(!s)return;e=s.id;let{data:r,error:a}=await n.O.from("matches").select("*").or("user1_id.eq.".concat(s.id,",user2_id.eq.").concat(s.id));r&&t(await Promise.all(r.map(async e=>{let t=e.user1_id===s.id?e.user2_id:e.user1_id,{data:r}=await n.O.from("profiles").select("*").eq("id",t).single();return{...e,partner:r}}))),c(!1)})();let s=n.O.channel("matches").on("postgres_changes",{event:"INSERT",schema:"public",table:"matches"},async s=>{let r=s.new;if(r.user1_id===e||r.user2_id===e){let s=r.user1_id===e?r.user2_id:r.user1_id,{data:a}=await n.O.from("profiles").select("*").eq("id",s).single();a&&t(e=>[...e,{...r,partner:a}])}}).subscribe();return()=>{n.O.removeChannel(s)}},[]),(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-100 via-rose-50 to-red-50",children:[(0,r.jsxs)("header",{className:"p-6 bg-gradient-to-r from-pink-500 to-red-500 shadow-lg flex items-center sticky top-0 z-10",children:[(0,r.jsx)(d.default,{href:"/home",className:"mr-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,r.jsx)(i.Z,{className:"text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-black text-white drop-shadow-md",children:"Messages \uD83D\uDC95"}),(0,r.jsx)("p",{className:"text-sm text-white/90",children:"Your matches and conversations"})]})]}),(0,r.jsx)("div",{className:"p-4 max-w-2xl mx-auto",children:s?(0,r.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-ue-red border-t-transparent"})}):(0,r.jsxs)("div",{className:"space-y-3",children:[0===e.length&&(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-12 text-center shadow-sm border border-gray-100",children:[(0,r.jsx)(l.Z,{className:"w-16 h-16 mx-auto mb-4 text-ue-red opacity-20"}),(0,r.jsx)("p",{className:"text-gray-500 font-medium",children:"No matches yet"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Keep swiping to find your match!"})]}),e.map(e=>{var t,s,a,n,l;return(0,r.jsxs)(d.default,{href:"/chat/".concat(e.id),className:"flex items-center gap-4 p-4 bg-white hover:bg-gray-50 rounded-2xl transition-all shadow-sm border border-gray-100 hover:shadow-md active:scale-98",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full flex-shrink-0 overflow-hidden ring-2 ring-white shadow-md",children:(null===(s=e.partner)||void 0===s?void 0:null===(t=s.photo_urls)||void 0===t?void 0:t[0])?(0,r.jsx)("img",{src:e.partner.photo_urls[0],alt:e.partner.nickname||"",className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-2xl font-bold text-gray-400",children:(null===(n=e.partner)||void 0===n?void 0:null===(a=n.nickname)||void 0===a?void 0:a[0])||"M"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:null===(l=e.partner)||void 0===l?void 0:l.nickname}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Tap to start chatting \uD83D\uDCAC"})]}),(0,r.jsx)(i.Z,{className:"w-5 h-5 text-gray-300 rotate-180"})]},e.id)})]})})]})}},5922:function(e,t,s){"use strict";s.d(t,{O:function(){return l},p:function(){return c}});var r=s(7688),a=s(9079);let n=a.env.NEXT_PUBLIC_SUPABASE_URL,i=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,l=(0,r.eI)(n,i),d=a.env.NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY||i,c=(0,r.eI)(n,d,{auth:{autoRefreshToken:!1,persistSession:!1}})},9108:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])}},function(e){e.O(0,[667,804,971,69,744],function(){return e(e.s=3781)}),_N_E=e.O()}]);