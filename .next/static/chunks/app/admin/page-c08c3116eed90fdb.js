(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8223:function(e,s,t){Promise.resolve().then(t.bind(t,2267))},2267:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var r=t(3827),a=t(4090),l=t(5922),n=t(7907),i=t(7461);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,i.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),o=(0,i.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function c(){var e,s;let t=(0,n.useRouter)(),[i,c]=(0,a.useState)("pending"),[x,m]=(0,a.useState)([]),[h,p]=(0,a.useState)([]),[u,g]=(0,a.useState)(!1),[b,f]=(0,a.useState)(!0),[j,v]=(0,a.useState)(""),[N,w]=(0,a.useState)(null),[y,k]=(0,a.useState)(null),[_,D]=(0,a.useState)([]),[C,A]=(0,a.useState)(!1),[E,P]=(0,a.useState)({totalUsers:0,pendingApprovals:0,totalMatches:0,openReports:0});(0,a.useEffect)(()=>{S(),q(),O(),R();let e=l.O.channel("admin-profiles").on("postgres_changes",{event:"INSERT",schema:"public",table:"profiles",filter:"status=eq.pending"},e=>{m(s=>[...s,e.new])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},e=>{let s=e.new;"pending"!==s.status&&m(e=>e.filter(e=>e.id!==s.id))}).subscribe(),s=l.O.channel("admin-reports").on("postgres_changes",{event:"INSERT",schema:"public",table:"reports"},async e=>{let s=e.new,{data:t}=await l.O.from("profiles").select("*").eq("id",s.reporter_id).single(),{data:r}=await l.O.from("profiles").select("*").eq("id",s.reported_id).single();t&&r&&p(e=>[...e,{...s,reporter:t,reported:r}])}).on("postgres_changes",{event:"DELETE",schema:"public",table:"reports"},e=>{p(s=>s.filter(s=>s.id!==e.old.id))}).subscribe();return()=>{l.O.removeChannel(e),l.O.removeChannel(s)}},[]);let R=async()=>{let{data:e}=await l.p.from("profiles").select("status",{count:"exact"}),{data:s,count:t}=await l.p.from("matches").select("*",{count:"exact",head:!0}),r=(null==e?void 0:e.filter(e=>"pending"===e.status).length)||0;P({totalUsers:(null==e?void 0:e.filter(e=>"approved"===e.status).length)||0,pendingApprovals:r,totalMatches:t||0,openReports:h.length})},S=async()=>{let{data:{user:e}}=await l.O.auth.getUser();if(!e){t.push("/admin/login");return}let{data:s}=await l.O.from("profiles").select("role, email").eq("id",e.id).single();v((null==s?void 0:s.email)||"Admin User"),(null==s?void 0:s.role)==="admin"?g(!0):t.push("/admin/login"),f(!1)},U=async()=>{confirm("Are you sure you want to log out?")&&(await l.O.auth.signOut(),t.push("/admin/login"))},q=async()=>{let{data:e}=await l.p.from("profiles").select("*").eq("status","pending");e&&m(e),f(!1)},O=async()=>{let{data:e}=await l.p.from("reports").select("*");e&&e.length>0&&p(await Promise.all(e.map(async e=>{let{data:s}=await l.p.from("profiles").select("*").eq("id",e.reporter_id).single(),{data:t}=await l.p.from("profiles").select("*").eq("id",e.reported_id).single();return{...e,reporter:s,reported:t}})))},B=async(e,s)=>{m(s=>s.filter(s=>s.id!==e)),P(e=>({...e,pendingApprovals:e.pendingApprovals-1,totalUsers:"approved"===s?e.totalUsers+1:e.totalUsers}));try{await l.p.from("profiles").update({status:s}).eq("id",e)}catch(e){console.error("Error updating profile:",e),q(),R()}},L=async(e,s)=>{if(confirm("Ban this user?")){p(e=>e.filter(e=>e.id!==s)),P(e=>({...e,openReports:e.openReports-1}));try{let{data:t}=await l.p.from("matches").select("user1_id, user2_id").or("user1_id.eq.".concat(e,",user2_id.eq.").concat(e));t&&t.length>0&&await l.p.from("matches").delete().or("user1_id.eq.".concat(e,",user2_id.eq.").concat(e)),await l.p.from("profiles").update({status:"rejected"}).eq("id",e),await l.p.from("reports").delete().eq("id",s)}catch(e){console.error("Error banning user:",e),O(),R()}}},T=async(e,s)=>{A(!0);try{let{data:t}=await l.p.from("matches").select("id").or("and(user1_id.eq.".concat(e,",user2_id.eq.").concat(s,"),and(user1_id.eq.").concat(s,",user2_id.eq.").concat(e,")")).single();if(!t){console.log("No match found between users"),D([]),A(!1);return}let{data:r,error:a}=await l.p.from("messages").select("*").eq("match_id",t.id).order("created_at",{ascending:!0});a&&console.error("Error loading messages:",a),D(r||[])}catch(e){console.error("Error loading messages:",e),D([])}finally{A(!1)}};return b?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-50 to-white",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-ue-red border-t-transparent"})}):u?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-8",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-ue-red to-red-700 shadow-lg p-4 md:p-6 sticky top-0 z-10 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl md:text-3xl font-black text-white mb-1 flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-3xl md:text-4xl",children:"\uD83D\uDEE1️"}),"Admin Dashboard"]}),(0,r.jsx)("p",{className:"text-white/80 text-sm",children:"Manage users and reports"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 md:gap-4 w-full md:w-auto",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl px-3 md:px-4 py-2 md:py-3 border border-white/20 flex-1 md:flex-initial",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs md:text-sm text-white",children:[(0,r.jsx)(d,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,r.jsx)("span",{className:"font-medium truncate",children:j})]}),(0,r.jsx)("div",{className:"text-xs text-green-300 font-bold mt-0.5",children:"● Admin Access"})]}),(0,r.jsxs)("button",{onClick:U,className:"flex items-center gap-2 px-3 md:px-5 py-2 md:py-3 bg-white/20 hover:bg-white/30 backdrop-blur-md text-white rounded-2xl font-bold transition-all active:scale-95 shadow-lg border border-white/30 text-sm md:text-base",children:[(0,r.jsx)(o,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"hidden md:inline",children:"Logout"})]})]})]})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 md:px-6 py-6 md:py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-3xl p-6 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsx)("div",{className:"text-4xl",children:"\uD83D\uDC65"}),(0,r.jsx)("div",{className:"text-4xl font-black",children:E.totalUsers})]}),(0,r.jsx)("div",{className:"text-sm font-semibold opacity-90",children:"Total Users"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-3xl p-6 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsx)("div",{className:"text-4xl",children:"⏳"}),(0,r.jsx)("div",{className:"text-4xl font-black",children:E.pendingApprovals})]}),(0,r.jsx)("div",{className:"text-sm font-semibold opacity-90",children:"Pending Approvals"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-3xl p-6 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsx)("div",{className:"text-4xl",children:"\uD83D\uDC95"}),(0,r.jsx)("div",{className:"text-4xl font-black",children:E.totalMatches})]}),(0,r.jsx)("div",{className:"text-sm font-semibold opacity-90",children:"Total Matches"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-3xl p-6 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsx)("div",{className:"text-4xl",children:"⚠️"}),(0,r.jsx)("div",{className:"text-4xl font-black",children:E.openReports})]}),(0,r.jsx)("div",{className:"text-sm font-semibold opacity-90",children:"Open Reports"})]})]})}),(0,r.jsxs)("div",{className:"max-w-5xl mx-auto p-6",children:[(0,r.jsxs)("div",{className:"flex gap-3 mb-8 bg-white rounded-3xl p-2 shadow-lg border-2 border-gray-100",children:[(0,r.jsx)("button",{onClick:()=>c("pending"),className:"flex-1 py-4 px-6 font-bold rounded-2xl transition-all duration-300 ".concat("pending"===i?"bg-gradient-to-r from-ue-red to-red-600 text-white shadow-xl scale-105":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"),children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCB"}),(0,r.jsx)("span",{children:"Pending Approvals"}),E.pendingApprovals>0&&(0,r.jsx)("span",{className:"ml-2 bg-white/30 text-white text-xs font-bold px-2 py-1 rounded-full",children:E.pendingApprovals})]})}),(0,r.jsx)("button",{onClick:()=>c("reports"),className:"flex-1 py-4 px-6 font-bold rounded-2xl transition-all duration-300 ".concat("reports"===i?"bg-gradient-to-r from-ue-red to-red-600 text-white shadow-xl scale-105":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"),children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"⚠️"}),(0,r.jsx)("span",{children:"Reports"}),E.openReports>0&&(0,r.jsx)("span",{className:"ml-2 bg-white/30 text-white text-xs font-bold px-2 py-1 rounded-full",children:E.openReports})]})})]}),"pending"===i&&(0,r.jsxs)("div",{className:"space-y-4",children:[0===x.length&&(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-12 text-center shadow-sm",children:[(0,r.jsx)("div",{className:"text-5xl mb-4",children:"✅"}),(0,r.jsx)("p",{className:"text-gray-500 font-medium",children:"No pending profiles"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"All caught up!"})]}),x.map(e=>{var s,t;return(0,r.jsxs)("div",{className:"bg-white rounded-3xl p-6 shadow-lg border-2 border-gray-100 hover:shadow-2xl hover:border-ue-red/30 transition-all duration-300 transform hover:-translate-y-1",children:[(0,r.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-200 to-gray-300 rounded-2xl overflow-hidden flex-shrink-0 shadow-md cursor-pointer hover:ring-4 hover:ring-ue-red/30 transition-all",onClick:()=>w(e),children:(null===(s=e.photo_urls)||void 0===s?void 0:s[0])?(0,r.jsx)("img",{src:e.photo_urls[0],className:"w-full h-full object-cover",alt:e.nickname||"User"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-3xl font-bold text-gray-400",children:(null===(t=e.nickname)||void 0===t?void 0:t[0])||"U"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-bold text-xl text-gray-800",children:e.nickname}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.college," - Year ",e.year_level]}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.email}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Gender:"})," ",e.gender," •",(0,r.jsx)("span",{className:"font-semibold ml-2",children:"Prefers:"})," ",e.preferred_gender]})]})]}),e.hobbies&&e.hobbies.length>0&&(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Hobbies"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:e.hobbies.map((e,s)=>(0,r.jsx)("span",{className:"text-xs bg-blue-50 text-blue-700 px-3 py-1 rounded-full font-medium",children:e},s))})]}),e.description&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Bio"}),(0,r.jsx)("p",{className:"text-sm bg-gray-50 p-3 rounded-xl border border-gray-100",children:e.description})]}),(0,r.jsxs)("button",{onClick:()=>w(e),className:"w-full mb-4 py-3 border-2 border-ue-red text-ue-red rounded-2xl font-bold hover:bg-ue-red hover:text-white transition-all duration-300 active:scale-95 shadow-md hover:shadow-lg",children:[(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDC41️"})," View Full Profile"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("button",{onClick:()=>B(e.id,"rejected"),className:"py-4 border-2 border-red-500 text-red-600 rounded-2xl font-bold hover:bg-red-500 hover:text-white transition-all duration-300 active:scale-95 shadow-md hover:shadow-xl",children:[(0,r.jsx)("span",{className:"text-lg",children:"❌"})," Reject"]}),(0,r.jsxs)("button",{onClick:()=>B(e.id,"approved"),className:"py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-2xl font-bold hover:from-green-600 hover:to-green-700 shadow-lg hover:shadow-xl transition-all duration-300 active:scale-95",children:[(0,r.jsx)("span",{className:"text-lg",children:"✅"})," Approve"]})]})]},e.id)})]}),"reports"===i&&(0,r.jsxs)("div",{className:"space-y-6",children:[0===h.length&&(0,r.jsxs)("div",{className:"bg-white rounded-3xl p-16 text-center shadow-lg",children:[(0,r.jsx)("div",{className:"text-7xl mb-4",children:"\uD83D\uDE0A"}),(0,r.jsx)("p",{className:"text-gray-700 font-bold text-xl mb-2",children:"No reports filed"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Community is doing great!"})]}),h.map(e=>{var s,t;return(0,r.jsxs)("div",{className:"bg-white rounded-3xl p-6 shadow-lg border-2 border-red-200 hover:shadow-2xl hover:border-red-400 transition-all duration-300 transform hover:-translate-y-1",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg",children:(0,r.jsx)("span",{className:"text-2xl",children:"⚠️"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-black text-red-600 text-xl mb-1",children:e.reason}),(0,r.jsxs)("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC5"})," ",new Date(e.created_at).toLocaleString()]})]})]}),e.details&&(0,r.jsxs)("div",{className:"mb-5",children:[(0,r.jsxs)("p",{className:"text-xs font-bold text-red-700 uppercase mb-2 flex items-center gap-1",children:[(0,r.jsx)("span",{children:"\uD83D\uDCDD"})," Additional Details"]}),(0,r.jsx)("p",{className:"text-sm bg-gradient-to-br from-red-50 to-orange-50 p-4 rounded-2xl border-2 border-red-200 leading-relaxed",children:e.details})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-5 space-y-3 mb-5 border border-gray-200 shadow-inner",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-600",children:"Reporter:"}),(0,r.jsx)("span",{className:"text-gray-800",children:null===(s=e.reporter)||void 0===s?void 0:s.nickname})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-600",children:"Reported User:"}),(0,r.jsx)("span",{className:"text-gray-800 font-bold",children:null===(t=e.reported)||void 0===t?void 0:t.nickname})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("button",{onClick:()=>w(e.reported),className:"py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-2xl font-bold hover:from-blue-600 hover:to-blue-700 shadow-lg hover:shadow-xl transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDC64"})," View Profile"]}),(0,r.jsxs)("button",{onClick:()=>{k(e),T(e.reporter_id,e.reported_id)},className:"py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-2xl font-bold hover:from-purple-600 hover:to-purple-700 shadow-lg hover:shadow-xl transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDCAC"})," View Chat"]})]}),(0,r.jsxs)("button",{onClick:()=>L(e.reported_id,e.id),className:"w-full py-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl font-bold hover:from-red-700 hover:to-red-800 shadow-xl hover:shadow-2xl transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDEAB"})," Ban User"]})]},e.id)})]})]}),N&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-50 flex items-center justify-center p-6 animate-fade-in",onClick:()=>w(null),children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl transform animate-slide-up",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-ue-red to-red-700 p-6 text-white rounded-t-3xl shadow-lg z-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-3xl",children:"\uD83D\uDC64"}),(0,r.jsx)("h2",{className:"text-2xl font-black",children:"Profile Review"})]}),(0,r.jsx)("button",{onClick:()=>w(null),className:"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-2xl flex items-center justify-center transition-all active:scale-95 shadow-lg",children:(0,r.jsx)("span",{className:"text-3xl font-bold",children:"\xd7"})})]}),(0,r.jsx)("p",{className:"text-white/80 text-sm",children:"Review user information and photos"})]}),(0,r.jsxs)("div",{className:"p-6",children:[N.photo_urls&&N.photo_urls.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("p",{className:"text-xs font-bold text-gray-700 uppercase mb-3 flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDCF8"})," Profile Photos"]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:N.photo_urls.map((e,s)=>(0,r.jsx)("div",{className:"aspect-square bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow",children:(0,r.jsx)("img",{src:e,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300",alt:"Photo ".concat(s+1)})},s))})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-6 mb-6 space-y-4 shadow-inner border border-gray-200",children:[(0,r.jsxs)("h3",{className:"font-black text-lg text-gray-800 mb-3 flex items-center gap-2",children:[(0,r.jsx)("span",{children:"ℹ️"})," Basic Information"]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-bold text-gray-600",children:"Nickname"}),(0,r.jsx)("span",{className:"text-sm text-gray-800 font-semibold",children:N.nickname})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-bold text-gray-600",children:"Email"}),(0,r.jsx)("span",{className:"text-sm text-gray-800",children:N.email})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-bold text-gray-600",children:"College"}),(0,r.jsx)("span",{className:"text-sm text-gray-800 font-semibold",children:N.college})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-bold text-gray-600",children:"Year Level"}),(0,r.jsx)("span",{className:"text-sm text-gray-800",children:N.year_level})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-bold text-gray-600",children:"Gender"}),(0,r.jsx)("span",{className:"text-sm text-gray-800",children:N.gender})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-bold text-gray-600",children:"Looking For"}),(0,r.jsx)("span",{className:"text-sm text-gray-800",children:N.preferred_gender})]})]}),N.hobbies&&N.hobbies.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-500 uppercase mb-3",children:"Hobbies"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:N.hobbies.map((e,s)=>(0,r.jsx)("span",{className:"bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-sm font-medium",children:e},s))})]}),N.description&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-500 uppercase mb-3",children:"Bio"}),(0,r.jsx)("p",{className:"text-sm bg-gray-50 p-4 rounded-xl border border-gray-100 leading-relaxed",children:N.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{onClick:()=>{B(N.id,"rejected"),w(null)},className:"py-4 border-2 border-red-500 text-red-500 rounded-xl font-bold hover:bg-red-50 transition-all active:scale-95",children:"❌ Reject Profile"}),(0,r.jsx)("button",{onClick:()=>{B(N.id,"approved"),w(null)},className:"py-4 bg-green-500 text-white rounded-xl font-bold hover:bg-green-600 shadow-lg transition-all active:scale-95",children:"✅ Approve Profile"})]})]})]})}),y&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-50 flex items-center justify-center p-6 animate-fade-in",onClick:()=>{k(null),D([])},children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl transform animate-slide-up",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-purple-700 p-6 text-white rounded-t-3xl shadow-lg z-10",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCAC"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-black",children:"Chat History"}),(0,r.jsxs)("p",{className:"text-sm text-white/80 mt-1",children:[null===(e=y.reporter)||void 0===e?void 0:e.nickname," ↔️ ",null===(s=y.reported)||void 0===s?void 0:s.nickname]})]})]}),(0,r.jsx)("button",{onClick:()=>{k(null),D([])},className:"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-2xl flex items-center justify-center transition-all active:scale-95 shadow-lg",children:(0,r.jsx)("span",{className:"text-3xl font-bold",children:"\xd7"})})]})}),(0,r.jsx)("div",{className:"p-6 bg-gradient-to-br from-red-50 to-orange-50 border-b-2 border-red-200",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg",children:(0,r.jsx)("span",{className:"text-2xl",children:"⚠️"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-black text-red-600 text-xl mb-2",children:y.reason}),y.details&&(0,r.jsx)("p",{className:"text-sm text-red-700 bg-white/50 p-3 rounded-xl border border-red-200",children:y.details})]})]})}),(0,r.jsxs)("div",{className:"p-6",children:[C?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-purple-500 border-t-transparent mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Loading messages..."})]}):0===_.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCAC"}),(0,r.jsx)("p",{className:"text-gray-500 font-medium",children:"No messages found"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"These users haven't chatted yet"})]}):(0,r.jsx)("div",{className:"space-y-3",children:_.map(e=>{var s,t;let a=e.sender_id===y.reporter_id,l=e.sender_id===y.reported_id;return(0,r.jsx)("div",{className:"flex ".concat(a?"justify-start":"justify-end"),children:(0,r.jsxs)("div",{className:"max-w-[70%] rounded-2xl px-4 py-3 ".concat(a?"bg-gray-100 text-gray-800":l?"bg-red-100 text-red-900 border-2 border-red-300":"bg-blue-500 text-white"),children:[(0,r.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,r.jsxs)("span",{className:"text-xs font-bold opacity-70",children:[a?null===(s=y.reporter)||void 0===s?void 0:s.nickname:null===(t=y.reported)||void 0===t?void 0:t.nickname,l&&" (Reported)"]})}),(0,r.jsx)("p",{className:"text-sm break-words",children:e.content}),(0,r.jsx)("p",{className:"text-xs opacity-60 mt-1",children:new Date(e.created_at).toLocaleString()})]})},e.id)})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-6 mt-6 border-t-2 border-gray-200",children:[(0,r.jsx)("button",{onClick:()=>{k(null),D([])},className:"py-4 border-2 border-gray-300 text-gray-700 rounded-2xl font-bold hover:bg-gray-50 hover:border-gray-400 transition-all duration-300 active:scale-95 shadow-md",children:"Close"}),(0,r.jsxs)("button",{onClick:()=>{L(y.reported_id,y.id),k(null),D([])},className:"py-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl font-bold hover:from-red-700 hover:to-red-800 shadow-xl hover:shadow-2xl transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDEAB"})," Ban User"]})]})]})]})})]}):null}},5922:function(e,s,t){"use strict";t.d(s,{O:function(){return i},p:function(){return o}});var r=t(7688),a=t(9079);let l=a.env.NEXT_PUBLIC_SUPABASE_URL,n=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,i=(0,r.eI)(l,n),d=a.env.NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY||n,o=(0,r.eI)(l,d,{auth:{autoRefreshToken:!1,persistSession:!1}})},7461:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var r=t(4090),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,s)=>{let t=(0,r.forwardRef)((t,n)=>{let{color:i="currentColor",size:d=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:x="",children:m,...h}=t;return(0,r.createElement)("svg",{ref:n,...a,width:d,height:d,stroke:i,strokeWidth:c?24*Number(o)/Number(d):o,className:["lucide","lucide-".concat(l(e)),x].join(" "),...h},[...s.map(e=>{let[s,t]=e;return(0,r.createElement)(s,t)}),...Array.isArray(m)?m:[m]])});return t.displayName="".concat(e),t}},7907:function(e,s,t){"use strict";var r=t(5313);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[667,971,69,744],function(){return e(e.s=8223)}),_N_E=e.O()}]);