(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8843:function(e,t,r){Promise.resolve().then(r.bind(r,6911))},6911:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(3827),n=r(4090),i=r(5922),a=r(7907),o=r(5211),l=r(684),c=r(933);function u(){let[e,t]=(0,n.useState)("email"),[r,u]=(0,n.useState)(""),[d,m]=(0,n.useState)(""),[h,f]=(0,n.useState)(!1),[x,p]=(0,n.useState)(""),b=(0,a.useRouter)(),g=async e=>{e.preventDefault(),f(!0),p("");try{let{error:e}=await i.O.auth.signInWithOtp({email:r,options:{shouldCreateUser:!0}});if(e)throw e;p("Check your email! We sent you a 6-digit code."),t("verify")}catch(e){p(e.message||"Failed to send OTP")}finally{f(!1)}},y=async e=>{e.preventDefault(),f(!0),p("");try{let{data:e,error:t}=await i.O.auth.verifyOtp({email:r,token:d,type:"email"});if(t)throw t;if(!e.session)throw Error("No session created after verification");if(e.user){let{data:t}=await i.O.from("profiles").select("status, nickname, photo_urls").eq("id",e.user.id).single();t&&t.nickname&&t.photo_urls&&0!==t.photo_urls.length?"pending"===t.status?b.push("/profile-setup/pending"):"approved"===t.status?b.push("/home"):"rejected"===t.status?b.push("/home"):p("Your account status is unclear. Please contact support."):b.push("/profile-setup")}}catch(e){console.error("Verification failed:",e),p(e.message||"Invalid or expired OTP code")}finally{f(!1)}};return(0,s.jsx)("main",{className:"relative flex min-h-screen flex-col items-center justify-center p-6 bg-gradient-to-br from-pink-100 via-rose-50 to-red-50",children:(0,s.jsxs)("div",{className:"w-full max-w-md relative z-10",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-pink-500 to-red-500 rounded-full mb-6 shadow-2xl animate-pulse",children:(0,s.jsx)(o.Z,{className:"w-14 h-14 text-white fill-white"})}),(0,s.jsx)("h1",{className:"text-6xl font-black bg-gradient-to-r from-pink-500 to-red-500 bg-clip-text text-transparent mb-4 drop-shadow-lg",children:"yUE Match!"}),(0,s.jsx)("p",{className:"text-gray-700 text-lg font-medium",children:"Find your match within the campus \uD83D\uDC95"})]}),(0,s.jsx)("div",{className:"bg-white/95 backdrop-blur-md rounded-3xl shadow-2xl p-8 border-2 border-pink-200/50",children:"verify"===e?(0,s.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-pink-100 rounded-full mb-3",children:(0,s.jsx)(l.Z,{className:"w-8 h-8 text-pink-600"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Check Your Email \uD83D\uDC8C"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["We sent an 8-digit code to ",(0,s.jsx)("strong",{children:r})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"otp",className:"block text-sm font-bold text-gray-700 mb-2",children:"Enter Verification Code"}),(0,s.jsx)("input",{type:"text",id:"otp",className:"w-full rounded-xl border-2 border-gray-200 px-4 py-4 focus:border-ue-red focus:outline-none transition-colors text-center text-2xl font-bold tracking-widest",placeholder:"00000000",value:d,onChange:e=>m(e.target.value.replace(/\D/g,"").slice(0,8)),maxLength:8,required:!0})]}),x&&(0,s.jsx)("div",{className:"p-4 rounded-xl text-sm font-medium ".concat(x.includes("Check")||x.includes("sent")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"),children:x}),(0,s.jsxs)("button",{type:"submit",disabled:h||8!==d.length,className:"w-full rounded-full bg-gradient-to-r from-pink-500 to-red-500 px-6 py-4 text-base font-bold text-white shadow-lg hover:shadow-xl focus:outline-none disabled:opacity-50 transition-all active:scale-95 flex items-center justify-center gap-2",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5"}),h?"Verifying...":"Verify & Continue"]}),(0,s.jsx)("button",{type:"button",onClick:()=>{t("email"),m(""),p("")},className:"w-full text-sm text-gray-500 hover:text-pink-500 transition-colors",children:"â† Back to email"})]}):(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-bold text-gray-700 mb-2",children:"UE Email Address"}),(0,s.jsx)("input",{type:"email",id:"email",className:"w-full rounded-xl border-2 border-pink-200 px-4 py-4 focus:border-pink-500 focus:outline-none transition-colors text-base",placeholder:"student@ue.edu.ph",value:r,onChange:e=>u(e.target.value),required:!0})]}),x&&!x.includes("Check")&&!x.includes("sent")&&(0,s.jsx)("div",{className:"p-4 rounded-xl text-sm font-medium bg-red-50 text-red-700 border border-red-200",children:x}),(0,s.jsxs)("button",{type:"submit",disabled:h,className:"w-full rounded-full bg-gradient-to-r from-pink-500 to-red-500 px-6 py-4 text-base font-bold text-white shadow-lg hover:shadow-xl focus:outline-none disabled:opacity-50 transition-all active:scale-95 flex items-center justify-center gap-2",children:[(0,s.jsx)(l.Z,{className:"w-5 h-5"}),h?"Sending Code...":"Continue with Email"]})]})}),(0,s.jsxs)("p",{className:"text-center text-sm text-gray-500 mt-8",children:["By continuing, you agree to our"," ",(0,s.jsx)("a",{href:"/terms",className:"text-red-600 hover:text-red-700 underline font-semibold",children:"Terms of Service & Privacy Policy"})]})]})})}},5922:function(e,t,r){"use strict";r.d(t,{O:function(){return o},p:function(){return c}});var s=r(7688),n=r(9079);let i=n.env.NEXT_PUBLIC_SUPABASE_URL,a=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,o=(0,s.eI)(i,a),l=n.env.NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY||a,c=(0,s.eI)(i,l,{auth:{autoRefreshToken:!1,persistSession:!1}})},7461:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4090),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(e,t)=>{let r=(0,s.forwardRef)((r,a)=>{let{color:o="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:d="",children:m,...h}=r;return(0,s.createElement)("svg",{ref:a,...n,width:l,height:l,stroke:o,strokeWidth:u?24*Number(c)/Number(l):c,className:["lucide","lucide-".concat(i(e)),d].join(" "),...h},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},5211:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(7461).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},933:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(7461).Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]])},684:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(7461).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7907:function(e,t,r){"use strict";var s=r(5313);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[667,971,69,744],function(){return e(e.s=8843)}),_N_E=e.O()}]);